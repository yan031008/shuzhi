{"version":3,"file":"login-DVW-Dxp2.js","sources":["../../mock/login.ts"],"sourcesContent":["import { MockMethod } from 'vite-plugin-mock'\nexport default [\n  {\n    url: '/api/login',\n    method: 'post',\n    rawResponse: async (req, res) => {\n      let reqBody: any = ''\n      await new Promise((resolve) => {\n        req.on('data', (chunk: any) => {\n          reqBody += chunk\n        })\n        req.on('end', () => {\n          resolve(reqBody)\n        })\n      })\n\n      try {\n        reqBody = JSON.parse(reqBody)\n        console.log(reqBody.username, reqBody.password)\n        // 修复密码拼写错误 'amdin' -> 'admin'\n        if (reqBody.username == 'admin' && reqBody.password == 'admin') {\n          console.log(reqBody.username)\n          res.setHeader('set-cookie', 'token=admin;max-age=3600;path=/;secure;sameSite=strict,')\n          res.statusCode = 200\n          res.end()\n        } else {\n          res.statusCode = 401\n          res.setHeader('content-type', 'application/json')\n          res.end(JSON.stringify({ code: 401, message: '用户名或密码错误' }))\n        }\n      } catch {\n        // 处理 JSON 解析错误或其他异常\n        res.statusCode = 400\n        res.setHeader('content-type', 'application/json')\n        res.end(JSON.stringify({ code: 400, message: '请求数据格式错误' }))\n      }\n    },\n  },\n] as MockMethod[]\n"],"names":["login","req","res","reqBody","resolve","chunk"],"mappings":"AACA,MAAAA,EAAe,CACb,CACE,IAAK,aACL,OAAQ,OACR,YAAa,MAAOC,EAAKC,IAAQ,CAC/B,IAAIC,EAAe,GACnB,MAAM,IAAI,QAASC,GAAY,CAC7BH,EAAI,GAAG,OAASI,GAAe,CAC7BF,GAAWE,CACb,CAAC,EACDJ,EAAI,GAAG,MAAO,IAAM,CAClBG,EAAQD,CAAO,CACjB,CAAC,CACH,CAAC,EAED,GAAI,CACFA,EAAU,KAAK,MAAMA,CAAO,EAC5B,QAAQ,IAAIA,EAAQ,SAAUA,EAAQ,QAAQ,EAE1CA,EAAQ,UAAY,SAAWA,EAAQ,UAAY,SACrD,QAAQ,IAAIA,EAAQ,QAAQ,EAC5BD,EAAI,UAAU,aAAc,yDAAyD,EACrFA,EAAI,WAAa,IACjBA,EAAI,IAAA,IAEJA,EAAI,WAAa,IACjBA,EAAI,UAAU,eAAgB,kBAAkB,EAChDA,EAAI,IAAI,KAAK,UAAU,CAAE,KAAM,IAAK,QAAS,UAAA,CAAY,CAAC,EAE9D,MAAQ,CAENA,EAAI,WAAa,IACjBA,EAAI,UAAU,eAAgB,kBAAkB,EAChDA,EAAI,IAAI,KAAK,UAAU,CAAE,KAAM,IAAK,QAAS,UAAA,CAAY,CAAC,CAC5D,CACF,CAAA,CAEJ"}