{"version":3,"file":"index-CRwWlQv7.js","sources":["../../node_modules/vant/es/form/Form.mjs","../../node_modules/vant/es/form/index.mjs"],"sourcesContent":["import { defineComponent, createVNode as _createVNode } from \"vue\";\nimport { FORM_KEY, truthProp, numericProp, preventDefault, createNamespace } from \"../utils/index.mjs\";\nimport { useChildren } from \"@vant/use\";\nimport { useExpose } from \"../composables/use-expose.mjs\";\nconst [name, bem] = createNamespace(\"form\");\nconst formProps = {\n  colon: Boolean,\n  disabled: Boolean,\n  readonly: Boolean,\n  required: [Boolean, String],\n  showError: Boolean,\n  labelWidth: numericProp,\n  labelAlign: String,\n  inputAlign: String,\n  scrollToError: Boolean,\n  scrollToErrorPosition: String,\n  validateFirst: Boolean,\n  submitOnEnter: truthProp,\n  showErrorMessage: truthProp,\n  errorMessageAlign: String,\n  validateTrigger: {\n    type: [String, Array],\n    default: \"onBlur\"\n  }\n};\nvar stdin_default = defineComponent({\n  name,\n  props: formProps,\n  emits: [\"submit\", \"failed\"],\n  setup(props, {\n    emit,\n    slots\n  }) {\n    const {\n      children,\n      linkChildren\n    } = useChildren(FORM_KEY);\n    const getFieldsByNames = (names) => {\n      if (names) {\n        return children.filter((field) => names.includes(field.name));\n      }\n      return children;\n    };\n    const validateSeq = (names) => new Promise((resolve, reject) => {\n      const errors = [];\n      const fields = getFieldsByNames(names);\n      fields.reduce((promise, field) => promise.then(() => {\n        if (!errors.length) {\n          return field.validate().then((error) => {\n            if (error) {\n              errors.push(error);\n            }\n          });\n        }\n      }), Promise.resolve()).then(() => {\n        if (errors.length) {\n          reject(errors);\n        } else {\n          resolve();\n        }\n      });\n    });\n    const validateAll = (names) => new Promise((resolve, reject) => {\n      const fields = getFieldsByNames(names);\n      Promise.all(fields.map((item) => item.validate())).then((errors) => {\n        errors = errors.filter(Boolean);\n        if (errors.length) {\n          reject(errors);\n        } else {\n          resolve();\n        }\n      });\n    });\n    const validateField = (name2) => {\n      const matched = children.find((item) => item.name === name2);\n      if (matched) {\n        return new Promise((resolve, reject) => {\n          matched.validate().then((error) => {\n            if (error) {\n              reject(error);\n            } else {\n              resolve();\n            }\n          });\n        });\n      }\n      return Promise.reject();\n    };\n    const validate = (name2) => {\n      if (typeof name2 === \"string\") {\n        return validateField(name2);\n      }\n      return props.validateFirst ? validateSeq(name2) : validateAll(name2);\n    };\n    const resetValidation = (name2) => {\n      if (typeof name2 === \"string\") {\n        name2 = [name2];\n      }\n      const fields = getFieldsByNames(name2);\n      fields.forEach((item) => {\n        item.resetValidation();\n      });\n    };\n    const getValidationStatus = () => children.reduce((form, field) => {\n      form[field.name] = field.getValidationStatus();\n      return form;\n    }, {});\n    const scrollToField = (name2, options) => {\n      children.some((item) => {\n        if (item.name === name2) {\n          item.$el.scrollIntoView(options);\n          return true;\n        }\n        return false;\n      });\n    };\n    const getValues = () => children.reduce((form, field) => {\n      if (field.name !== void 0) {\n        form[field.name] = field.formValue.value;\n      }\n      return form;\n    }, {});\n    const submit = () => {\n      const values = getValues();\n      validate().then(() => emit(\"submit\", values)).catch((errors) => {\n        emit(\"failed\", {\n          values,\n          errors\n        });\n        const {\n          scrollToError,\n          scrollToErrorPosition\n        } = props;\n        if (scrollToError && errors[0].name) {\n          scrollToField(errors[0].name, scrollToErrorPosition ? {\n            block: scrollToErrorPosition\n          } : void 0);\n        }\n      });\n    };\n    const onSubmit = (event) => {\n      preventDefault(event);\n      submit();\n    };\n    linkChildren({\n      props\n    });\n    useExpose({\n      submit,\n      validate,\n      getValues,\n      scrollToField,\n      resetValidation,\n      getValidationStatus\n    });\n    return () => {\n      var _a;\n      return _createVNode(\"form\", {\n        \"class\": bem(),\n        \"onSubmit\": onSubmit\n      }, [(_a = slots.default) == null ? void 0 : _a.call(slots)]);\n    };\n  }\n});\nexport {\n  stdin_default as default,\n  formProps\n};\n","import { withInstall } from \"../utils/index.mjs\";\nimport _Form from \"./Form.mjs\";\nconst Form = withInstall(_Form);\nvar stdin_default = Form;\nimport { formProps } from \"./Form.mjs\";\nexport {\n  Form,\n  stdin_default as default,\n  formProps\n};\n"],"names":["name","bem","createNamespace","formProps","numericProp","truthProp","stdin_default","defineComponent","props","emit","slots","children","linkChildren","useChildren","FORM_KEY","getFieldsByNames","names","field","validateSeq","resolve","reject","errors","promise","error","validateAll","fields","item","validateField","name2","matched","validate","resetValidation","getValidationStatus","form","scrollToField","options","getValues","submit","values","scrollToError","scrollToErrorPosition","onSubmit","event","preventDefault","useExpose","_a","_createVNode","Form","withInstall","_Form"],"mappings":"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","x_google_ignoreList":[0,1]}