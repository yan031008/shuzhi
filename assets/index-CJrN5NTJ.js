import"./index-BmCKTg_R.js";import"./index-BF3qf3ZU.js";import{B as k}from"./index-BVfH6ent.js";import{_}from"./titleHeader.vue_vue_type_script_setup_true_lang-BQ9oZ619.js";import{_ as x}from"./image.vue_vue_type_script_setup_true_lang-BL6AHGiI.js";import{d as y,r as s,c as h,a as l,b as r,n as u,w as d,o as C,k as v,q as j,u as w}from"./index-B3SPDOIp.js";import"./use-route-IIqh61bl.js";const z={class:"w-screen text-[12px] h-screen p-1"},I={class:"mt-1 p-1 rounded bg-green-200 flex flex-col justify-center items-center"},R=["srcObject"],B={class:"flex justify-center items-center mt-1"},P=y({__name:"index",setup($){const m=j("router"),c=s("/shuzhi/image/studentPhoto.jpg"),p=()=>{const t=e.value.getVideoTracks()[0];new ImageCapture(t).takePhoto().then(n=>{console.log(n),c.value=URL.createObjectURL(n),e.value.getTracks()[0].stop(),e.value=""}).catch(()=>{e.value.getTracks()[0].stop(),e.value=""})},a=s(""),g=t=>{a.value=t},i=s(),e=s(),f=()=>{"mediaDevices"in navigator?(console.log(navigator.mediaDevices),navigator.mediaDevices.getUserMedia({video:!0}).then(t=>{console.log("获取到视频流:",t),i.value&&(e.value=t,i.value.play())}).catch(t=>{console.error("获取摄像头失败:",t)})):console.error("浏览器不支持媒体设备")};return(t,o)=>{const n=k;return C(),h("div",z,[l(_,{title:"拍照",goRoute:()=>{w(m).go(-1)}},null,8,["goRoute"]),r("div",I,[l(x,{onClick:o[0]||(o[0]=b=>g(c.value)),src:c.value},null,8,["src"]),r("video",{ref_key:"videoRef",ref:i,srcObject:e.value,autoplay:"",playsinline:"",style:u({zIndex:e.value?1:-2,backgroundColor:e.value?"black":"transparent",display:e.value?"inline-block":"none"}),class:"fixed top-0 left-0 h-screen w-screen"},null,12,R),l(n,{onClick:p,class:"fixed! bottom-1! w-8!",style:u({zIndex:e.value?2:-2,display:e.value?"inline-block":"none"})},{default:d(()=>[...o[2]||(o[2]=[v("拍照",-1)])]),_:1},8,["style"]),r("div",B,[l(n,{onClick:f,round:"",type:"success"},{default:d(()=>[...o[3]||(o[3]=[v(" 重新拍照 ",-1)])]),_:1})])]),r("div",{onClick:o[1]||(o[1]=b=>a.value=""),class:"fixed top-0 z-[-1] left-0 h-screen w-screen bg-fixed bg-center bg-no-repeat bg-contain bg-black",style:u({backgroundImage:a.value?`url(${a.value})`:"url('')",zIndex:a.value?1:-1,backgroundColor:a.value?"black":"transparent"})},null,4)])}}});export{P as default};
//# sourceMappingURL=index-CJrN5NTJ.js.map
