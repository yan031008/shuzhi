{"version":3,"file":"index-JXkpgt6q.js","sources":["../../src/request/login/index.ts","../../src/views/login/index.vue"],"sourcesContent":["import request from '../index.ts'\r\nexport async function login(url: string, string: string, data: object) {\r\n  return await request(url, string, data)\r\n}\r\n","<template>\n  <div ref=\"page\" class=\"page flex justify-center items-center bg-linear-to-b from-[#7f7fd5\n] via-[#86a8e7] to-[#91eae4]\">\n    <van-form\n      class=\"text-[16px] p-2 border border-white w-[80%]  flex justify-center  flex-col\">\n      <span>欢迎登录！</span>\n      <van-field  v-model=\"username\" name=\"username\" label=\"用户名\" placeholder=\"请输入用户名\" required />\n      <van-field class=\"\" type=\"password\" v-model=\"password\" name=\"password\" label=\"密码\" placeholder=\"请输入密码\"\n        required></van-field>\n      <van-button @click=\"Login\" class=\"\" type=\"success\">登录</van-button>\n    </van-form>\n  </div>\n</template>\n<script setup lang='ts'>\nimport { ref, inject } from 'vue'\nconst username = ref<string>('')\nconst password = ref<string>('')\nimport { login } from '@/request/login/index.ts'\nimport type { Router } from 'vue-router'\nimport { showToast } from 'vant'\nimport 'vant/es/toast/style';\nimport type { AxiosError, AxiosResponse } from 'axios'\nconst router = inject('router') as Router\nconst Login = async () => {\n  try {\n    const res = await login('/api/login', 'post', {\n      username: username.value,\n      password: password.value\n    }) as AxiosResponse | AxiosError\n    if ('status' in res && res.status === 200) {\n      router.push({\n        name: 'home'\n      })\n    } else if ('status' in res && res.status === 401) {\n      console.log('用户名或密码错误')\n      showToast({\n        message: '用户名或密码错误',\n      })\n    } else {\n      // 处理其他错误情况\n      showToast({\n        message: '登录失败，请稍后重试',\n      })\n    }\n    console.log(res.status)\n  } catch (error) {\n    showToast({\n      message: '网络错误，请稍后重试',\n      className: ['text-[12px]']\n    })\n    console.error(error)\n  }\n}\n</script>\n<style scoped lang=''>\n\n</style>\n"],"names":["login","url","string","data","request","username","ref","password","router","inject","Login","res","showToast","error","_openBlock","_createElementBlock","_hoisted_1","_createVNode","_component_van_form","_cache","_createElementVNode","_component_van_field","$event","_component_van_button"],"mappings":"gjBACA,eAAsBA,EAAMC,EAAaC,EAAgBC,EAAc,CACrE,OAAO,MAAMC,EAAQH,EAAKC,EAAQC,CAAI,CACxC,2JCYA,MAAME,EAAWC,EAAY,EAAE,EACzBC,EAAWD,EAAY,EAAE,EAMzBE,EAASC,EAAO,QAAQ,EACxBC,EAAQ,SAAY,CACxB,GAAI,CACF,MAAMC,EAAM,MAAMX,EAAM,aAAc,OAAQ,CAC5C,SAAUK,EAAS,MACnB,SAAUE,EAAS,KAAA,CACpB,EACG,WAAYI,GAAOA,EAAI,SAAW,IACpCH,EAAO,KAAK,CACV,KAAM,MAAA,CACP,EACQ,WAAYG,GAAOA,EAAI,SAAW,KAC3C,QAAQ,IAAI,UAAU,EACtBC,EAAU,CACR,QAAS,UAAA,CACV,GAGDA,EAAU,CACR,QAAS,YAAA,CACV,EAEH,QAAQ,IAAID,EAAI,MAAM,CACxB,OAASE,EAAO,CACdD,EAAU,CACR,QAAS,aACT,UAAW,CAAC,aAAa,CAAA,CAC1B,EACD,QAAQ,MAAMC,CAAK,CACrB,CACF,kCAnDE,OAAAC,EAAA,EAAAC,EAUM,MAVNC,EAUM,CARJC,EAOWC,EAAA,CANT,MAAM,4EAA4E,WAClF,IAAkB,CAAlBC,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAC,EAAkB,YAAZ,QAAK,EAAA,GACXH,EAA2FI,EAAA,YAAtEhB,EAAA,2CAAAA,EAAQ,MAAAiB,GAAE,KAAK,WAAW,MAAM,MAAM,YAAY,SAAS,SAAA,EAAA,yBAChFL,EACuBI,EAAA,CADZ,MAAM,GAAG,KAAK,sBAAoBd,EAAA,2CAAAA,EAAQ,MAAAe,GAAE,KAAK,WAAW,MAAM,KAAK,YAAY,QAC5F,SAAA,EAAA,yBACFL,EAAkEM,EAAA,CAArD,QAAOb,EAAO,MAAM,GAAG,KAAK,SAAA,aAAU,IAAE,CAAA,GAAAS,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAA,GAAF,KAAE,EAAA,CAAA"}