import"./index-CWALDLmE.js";import"./index-BBy9tPwK.js";import{B as k}from"./index-DVNRutyO.js";import{_}from"./titleHeader.vue_vue_type_script_setup_true_lang-a_AdcqA7.js";import{_ as x}from"./image.vue_vue_type_script_setup_true_lang-CTj9TU9w.js";import{d as y,r as s,c as C,a as l,b as r,n as u,w as d,o as h,k as v,q as j,u as w}from"./index-C-Ah_xeN.js";import"./use-route-CLM8tOUW.js";const z={class:"w-screen text-[12px] h-screen p-1"},I={class:"mt-1 p-1 rounded bg-green-200 flex flex-col justify-center items-center"},R=["srcObject"],B={class:"flex justify-center items-center mt-1"},P=y({__name:"index",setup($){const p=j("router"),c=s("/public/image/studentPhoto.jpg"),m=()=>{const t=e.value.getVideoTracks()[0];new ImageCapture(t).takePhoto().then(a=>{console.log(a),c.value=URL.createObjectURL(a),e.value.getTracks()[0].stop(),e.value=""}).catch(()=>{e.value.getTracks()[0].stop(),e.value=""})},n=s(""),f=t=>{n.value=t},i=s(),e=s(),g=()=>{"mediaDevices"in navigator?navigator.mediaDevices.getUserMedia({video:!0}).then(t=>{console.log("获取到视频流:",t),i.value&&(e.value=t,i.value.play())}).catch(t=>{console.error("获取摄像头失败:",t)}):console.error("浏览器不支持媒体设备")};return(t,o)=>{const a=k;return h(),C("div",z,[l(_,{title:"拍照",goRoute:()=>{w(p).go(-1)}},null,8,["goRoute"]),r("div",I,[l(x,{onClick:o[0]||(o[0]=b=>f(c.value)),src:c.value},null,8,["src"]),r("video",{ref_key:"videoRef",ref:i,srcObject:e.value,autoplay:"",playsinline:"",style:u({zIndex:e.value?1:-2,backgroundColor:e.value?"black":"transparent",display:e.value?"inline-block":"none"}),class:"fixed top-0 left-0 h-screen w-screen"},null,12,R),l(a,{onClick:m,class:"fixed! bottom-1! w-8!",style:u({zIndex:e.value?2:-2,display:e.value?"inline-block":"none"})},{default:d(()=>[...o[2]||(o[2]=[v("拍照",-1)])]),_:1},8,["style"]),r("div",B,[l(a,{onClick:g,round:"",type:"success"},{default:d(()=>[...o[3]||(o[3]=[v(" 重新拍照 ",-1)])]),_:1})])]),r("div",{onClick:o[1]||(o[1]=b=>n.value=""),class:"fixed top-0 z-[-1] left-0 h-screen w-screen bg-fixed bg-center bg-no-repeat bg-contain bg-black",style:u({backgroundImage:n.value?`url(${n.value})`:"url('')",zIndex:n.value?1:-1,backgroundColor:n.value?"black":"transparent"})},null,4)])}}});export{P as default};
//# sourceMappingURL=index-CF3jvSxY.js.map
